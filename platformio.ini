; PlatformIO Project Configuration File
;
; ESP32-S3 TSL Tally Light with Web Configuration
; Video Walrus 2025

[env:esp32-s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Serial monitor
monitor_speed = 115200

; Libraries
lib_deps =
    fastled/FastLED@3.9.3
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1

; Build flags
build_flags =
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1

; Upload settings
upload_speed = 921600

; OTA upload environment
; Usage: pio run -t upload -e ota
; Set TALLY_IP environment variable or edit upload_port below
[env:ota]
extends = env:esp32-s3
upload_protocol = espota
upload_port = ${sysenv.TALLY_IP}
upload_flags =
    --auth=password
